<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeu Pac-Man</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            background-color: #000;
        }

        #gameCanvas {
            position: relative;
            background-color: black;
        }

        #retour {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: #007BFF;
            color: white;
            font-size: 18px;
            border: none;
            cursor: pointer;
            padding: 10px;
            z-index: 10;
        }

        #retour:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <!-- Bouton de retour au menu principal -->
    <button id="retour" onclick="retour()">← Menu</button>

    <!-- Canvas pour afficher le jeu Pac-Man -->
    <canvas id="gameCanvas" width="600" height="600"></canvas>

    <!-- Script pour charger le jeu Pac-Man -->
    <script>
        // Définissez vos classes Boundary, Pellet, etc., ici ou importez-les
        class Boundary {
            static width = 40;
            static height = 40;

            constructor({ position, image }) {
                this.position = position;
                this.image = image;
                this.width = Boundary.width;
                this.height = Boundary.height;
            }

            draw() {
                const ctx = document.querySelector('#gameCanvas').getContext('2d');
                ctx.drawImage(this.image, this.position.x, this.position.y, this.width, this.height);
            }
        }

        class Pellet {
            constructor({ position }) {
                this.position = position;
                this.radius = 5;
            }

            draw() {
                const ctx = document.querySelector('#gameCanvas').getContext('2d');
                ctx.beginPath();
                ctx.arc(this.position.x, this.position.y, this.radius, 0, Math.PI * 2, false);
                ctx.fillStyle = 'white';
                ctx.fill();
                ctx.closePath();
            }
        }

        function createImage(src) {
            const image = new Image();
            image.src = src;
            return image;
        }

        const boundaries = [];
        const pellets = [];

        const map = [
            ['1', '-', '-', '-', '-', '-', '-', '-', '-', '-', '2'],
            ['|', '.', '.', '.', '.', '.', '.', '.', '.', '.', '|'],
            ['|', '.', 'b', '.', '[', '7', ']', '.', 'b', '.', '|'],
            ['|', '.', '.', '.', '.', '_', '.', '.', '.', '.', '|'],
            ['|', '.', '[', ']', '.', '.', '.', '[', ']', '.', '|'],
            ['|', '.', '.', '.', '.', '^', '.', '.', '.', '.', '|'],
            ['|', '.', 'b', '.', '[', '+', ']', '.', 'b', '.', '|'],
            ['|', '.', '.', '.', '.', '_', '.', '.', '.', '.', '|'],
            ['|', '.', '[', ']', '.', '.', '.', '[', ']', '.', '|'],
            ['|', '.', '.', '.', '.', '^', '.', '.', '.', '.', '|'],
            ['|', '.', 'b', '.', '[', '5', ']', '.', 'b', '.', '|'],
            ['|', '.', '.', '.', '.', '.', '.', '.', '.', 'p', '|'],
            ['4', '-', '-', '-', '-', '-', '-', '-', '-', '-', '3']
        ];

        map.forEach((row, i) => {
            row.forEach((symbol, j) => {
                switch (symbol) {
                    case '-':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: Boundary.width * j,
                                    y: Boundary.height * i
                                },
                                image: createImage('./img/pipeHorizontal.png')
                            })
                        );
                        break;
                    case '|':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: Boundary.width * j,
                                    y: Boundary.height * i
                                },
                                image: createImage('./img/pipeVertical.png')
                            })
                        );
                        break;
                    case '1':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: Boundary.width * j,
                                    y: Boundary.height * i
                                },
                                image: createImage('./img/pipeCorner1.png')
                            })
                        );
                        break;
                    case '2':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: Boundary.width * j,
                                    y: Boundary.height * i
                                },
                                image: createImage('./img/pipeCorner2.png')
                            })
                        );
                        break;
                    case '3':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: Boundary.width * j,
                                    y: Boundary.height * i
                                },
                                image: createImage('./img/pipeCorner3.png')
                            })
                        );
                        break;
                    case '4':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: Boundary.width * j,
                                    y: Boundary.height * i
                                },
                                image: createImage('./img/pipeCorner4.png')
                            })
                        );
                        break;
                    case 'b':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: Boundary.width * j,
                                    y: Boundary.height * i
                                },
                                image: createImage('./img/block.png')
                            })
                        );
                        break;
                    case '[':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: j * Boundary.width,
                                    y: i * Boundary.height
                                },
                                image: createImage('./img/capLeft.png')
                            })
                        );
                        break;
                    case ']':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: j * Boundary.width,
                                    y: i * Boundary.height
                                },
                                image: createImage('./img/capRight.png')
                            })
                        );
                        break;
                    case '_':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: j * Boundary.width,
                                    y: i * Boundary.height
                                },
                                image: createImage('./img/capBottom.png')
                            })
                        );
                        break;
                    case '^':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: j * Boundary.width,
                                    y: i * Boundary.height
                                },
                                image: createImage('./img/capTop.png')
                            })
                        );
                        break;
                    case '+':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: j * Boundary.width,
                                    y: i * Boundary.height
                                },
                                image: createImage('./img/pipeCross.png')
                            })
                        );
                        break;
                    case '5':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: j * Boundary.width,
                                    y: i * Boundary.height
                                },
                                image: createImage('./img/pipeConnectorTop.png')
                            })
                        );
                        break;
                    case '6':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: j * Boundary.width,
                                    y: i * Boundary.height
                                },
                                image: createImage('./img/pipeConnectorRight.png')
                            })
                        );
                        break;
                    case '7':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: j * Boundary.width,
                                    y: i * Boundary.height
                                },
                                image: createImage('./img/pipeConnectorBottom.png')
                            })
                        );
                        break;
                    case '8':
                        boundaries.push(
                            new Boundary({
                                position: {
                                    x: j * Boundary.width,
                                    y: i * Boundary.height
                                },
                                image: createImage('./img/pipeConnectorLeft.png')
                            })
                        );
                        break;
                    case '.':
                        pellets.push(
                            new Pellet({
                                position: {
                                    x: j * Boundary.width + Boundary.width / 2,
                                    y: i * Boundary.height + Boundary.height / 2
                                }
                            })
                        );
                        break;
                }
            });
        });

        function animate() {
            const canvas = document.querySelector('#gameCanvas');
            const ctx = canvas.getContext('2d');
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            boundaries.forEach(boundary => {
                boundary.draw();
            });

            pellets.forEach(pellet => {
                pellet.draw();
            });

            requestAnimationFrame(animate);
        }

        animate();

        function retour() {
            // Redirige vers la page d'accueil ou de menu
            window.location.href = "index.html";
        }
    </script>
</body>
</html>
